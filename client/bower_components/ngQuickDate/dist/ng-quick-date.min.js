(function(){var n;n=angular.module("ngQuickDate",[]);n.provider("ngQuickDateDefaults",function(){return{options:{dateFormat:"M/d/yyyy",timeFormat:"h:mm a",labelFormat:null,placeholder:"Click to Set Date",hoverText:null,buttonIconHtml:null,closeButtonHtml:"&times;",nextLinkHtml:"Next &rarr;",prevLinkHtml:"&larr; Prev",disableTimepicker:!1,disableClearButton:!1,defaultTime:null,dayAbbreviations:["Su","M","Tu","W","Th","F","Sa"],dateFilter:null,hideWeekends:!1,parseDateFunction:function(n){var t;return t=Date.parse(n),isNaN(t)?null:new Date(t)}},$get:function(){return this.options},set:function(n,t){var i,u,r;if(typeof n=="object"){r=[];for(i in n)u=n[i],r.push(this.options[i]=u);return r}return this.options[n]=t}}});n.directive("quickDatepicker",["ngQuickDateDefaults","$filter","$sce",function(n,t,i){return{restrict:"E",require:"?ngModel",scope:{dateFilter:"=?",onChange:"&",required:"@"},replace:!0,link:function(r,u,f,e){var g,c,l,v,y,p,w,h,o,s,b,k,d,a;return w=function(){var n;return b(),r.toggleCalendar(!1),r.weeks=[],r.inputDate=null,r.inputTime=null,r.invalid=!0,typeof f.initValue=="string"&&e.$setViewValue(f.initValue),r.defaultTime||(n=new Date(2013,0,1,12,0),r.datePlaceholder=t("date")(n,r.dateFormat),r.timePlaceholder=t("date")(n,r.timeFormat)),s(),o()},b=function(){var t,u;for(t in n)u=n[t],t.match(/[Hh]tml/)?r[t]=i.trustAsHtml(n[t]||""):!r[t]&&f[t]?r[t]=f[t]:r[t]||(r[t]=n[t]);return r.labelFormat||(r.labelFormat=r.dateFormat,r.disableTimepicker||(r.labelFormat+=" "+r.timeFormat)),f.iconClass&&f.iconClass.length?r.buttonIconHtml=i.trustAsHtml("<i ng-show='iconClass' class='"+f.iconClass+"'><\/i>"):void 0},c=!1,window.document.addEventListener("click",function(){return r.calendarShown&&!c&&(r.toggleCalendar(!1),r.$apply()),c=!1}),angular.element(u[0])[0].addEventListener("click",function(){return c=!0}),o=function(){var n;return n=e.$modelValue?h(e.$modelValue):null,d(),k(n),r.mainButtonStr=n?t("date")(n,r.labelFormat):r.placeholder,r.invalid=e.$invalid},k=function(n){return n!=null?(r.inputDate=t("date")(n,r.dateFormat),r.inputTime=t("date")(n,r.timeFormat)):(r.inputDate=null,r.inputTime=null)},s=function(n){var t;return n==null&&(n=null),t=n!=null?new Date(n):new Date,t.toString()==="Invalid Date"&&(t=new Date),t.setDate(1),r.calendarDate=new Date(t)},d=function(){var t,n,a,v,y,s,h,w,o,b,i,u,c,f;for(s=r.calendarDate.getDay(),v=p(r.calendarDate.getFullYear(),r.calendarDate.getMonth()),y=Math.ceil((s+v)/7),i=[],t=new Date(r.calendarDate),t.setDate(t.getDate()+s*-1),h=u=0,f=y-1;0<=f?u<=f:u>=f;h=0<=f?++u:--u)for(i.push([]),a=c=0;c<=6;a=++c)n=new Date(t),r.defaultTime&&(o=r.defaultTime.split(":"),n.setHours(o[0]||0),n.setMinutes(o[1]||0),n.setSeconds(o[2]||0)),w=e.$modelValue&&n&&l(n,e.$modelValue),b=l(n,new Date),i[h].push({date:n,selected:w,disabled:(typeof r.dateFilter=="function"?!r.dateFilter(n):!1)||r.hideWeekends&&(n.getDay()===0||n.getDay()===6),other:n.getMonth()!==r.calendarDate.getMonth(),today:b}),t.setDate(t.getDate()+1);return console.log("weeks",i),r.weeks=i},e.$parsers.push(function(n){return r.required&&n==null?(e.$setValidity("required",!1),null):angular.isDate(n)?(e.$setValidity("required",!0),n):angular.isString(n)?(e.$setValidity("required",!0),r.parseDateFunction(n)):null}),e.$formatters.push(function(n){return angular.isDate(n)?n:angular.isString(n)?r.parseDateFunction(n):void 0}),g=function(n,i){return t("date")(n,i)},a=function(n){return typeof n=="string"?h(n):n},h=n.parseDateFunction,l=function(n,t,i){return i==null&&(i=!1),i?n-t==0:(n=a(n),t=a(t),n&&t&&n.getYear()===t.getYear()&&n.getMonth()===t.getMonth()&&n.getDate()===t.getDate())},v=function(n,t){return(n&&t)?parseInt(n.getTime()/6e4)===parseInt(t.getTime()/6e4):!1},p=function(n,t){return[31,n%4==0&&n%100!=0||n%400==0?29:28,31,30,31,30,31,31,30,31,30,31][t]},y=function(n,t){var r,u,f,e,i,o;return i=r=u=o=e=null,f=function(){var n;return n=+new Date-o,i=n<t&&n>0?setTimeout(f,t-n):null},function(){return u=this,r=arguments,o=+new Date,i||(i=setTimeout(f,t),e=n.apply(u,r),u=r=null),e}},e.$render=function(){return s(e.$viewValue),o()},e.$viewChangeListeners.unshift(function(){return s(e.$viewValue),o(),r.onChange?r.onChange():void 0}),r.$watch("calendarShown",function(n){var t;if(n)return t=angular.element(u[0].querySelector(".quickdate-date-input"))[0],t.select()}),r.toggleCalendar=y(function(n){return r.calendarShown=isFinite(n)?n:!r.calendarShown},150),r.selectDate=function(n,t){var i;return(t==null&&(t=!0),i=!e.$viewValue&&n||e.$viewValue&&!n||n&&e.$viewValue&&n.getTime()!==e.$viewValue.getTime(),typeof r.dateFilter=="function"&&!r.dateFilter(n)||r.hideWeekends&&(n.getDay()===0||n.getDay()===6))?!1:(e.$setViewValue(n),t&&r.toggleCalendar(!1),!0)},r.selectDateFromInput=function(n){var i,t,u,f;n==null&&(n=!1);try{if(t=h(r.inputDate),!t)throw"Invalid Date";if(!r.disableTimepicker&&r.inputTime&&r.inputTime.length&&t){if(f=r.disableTimepicker?"00:00:00":r.inputTime,u=h(""+r.inputDate+" "+f),!u)throw"Invalid Time";t=u}if(!v(e.$viewValue,t)&&!r.selectDate(t,!1))throw"Invalid Date";return n&&r.toggleCalendar(!1),r.inputDateErr=!1,r.inputTimeErr=!1}catch(o){if(i=o,i==="Invalid Date")return r.inputDateErr=!0;if(i==="Invalid Time")return r.inputTimeErr=!0}},r.onDateInputTab=function(){return r.disableTimepicker&&r.toggleCalendar(!1),!0},r.onTimeInputTab=function(){return r.toggleCalendar(!1),!0},r.nextMonth=function(){return s(new Date(new Date(r.calendarDate).setMonth(r.calendarDate.getMonth()+1))),o()},r.prevMonth=function(){return s(new Date(new Date(r.calendarDate).setMonth(r.calendarDate.getMonth()-1))),o()},r.clear=function(){return r.selectDate(null,!0)},w()},template:"<div class='quickdate'>\n  <a href='' ng-focus='toggleCalendar()' ng-click='toggleCalendar()' class='quickdate-button' title='{{hoverText}}'><div ng-hide='iconClass' ng-bind-html='buttonIconHtml'><\/div>{{mainButtonStr}}<\/a>\n  <div class='quickdate-popup' ng-class='{open: calendarShown}'>\n    <a href='' tabindex='-1' class='quickdate-close' ng-click='toggleCalendar()'><div ng-bind-html='closeButtonHtml'><\/div><\/a>\n    <div class='quickdate-text-inputs'>\n      <div class='quickdate-input-wrapper'>\n        <label>Date<\/label>\n        <input class='quickdate-date-input' ng-class=\"{'ng-invalid': inputDateErr}\" name='inputDate' type='text' ng-model='inputDate' placeholder='{{ datePlaceholder }}' ng-enter=\"selectDateFromInput(true)\" ng-blur=\"selectDateFromInput(false)\" on-tab='onDateInputTab()' />\n      <\/div>\n      <div class='quickdate-input-wrapper' ng-hide='disableTimepicker'>\n        <label>Time<\/label>\n        <input class='quickdate-time-input' ng-class=\"{'ng-invalid': inputTimeErr}\" name='inputTime' type='text' ng-model='inputTime' placeholder='{{ timePlaceholder }}' ng-enter=\"selectDateFromInput(true)\" ng-blur=\"selectDateFromInput(false)\" on-tab='onTimeInputTab()'>\n      <\/div>\n    <\/div>\n    <div class='quickdate-calendar-header'>\n      <a href='' class='quickdate-prev-month quickdate-action-link' tabindex='-1' ng-click='prevMonth()'><div ng-bind-html='prevLinkHtml'><\/div><\/a>\n      <span class='quickdate-month'>{{calendarDate | date:'MMMM yyyy'}}<\/span>\n      <a href='' class='quickdate-next-month quickdate-action-link' ng-click='nextMonth()' tabindex='-1' ><div ng-bind-html='nextLinkHtml'><\/div><\/a>\n    <\/div>\n    <table class='quickdate-calendar' ng-class='{\"hide-weekends\": hideWeekends}'>\n      <thead>\n        <tr>\n          <th ng-repeat='day in dayAbbreviations'>{{day}}<\/th>\n        <\/tr>\n      <\/thead>\n      <tbody>\n        <tr ng-repeat='week in weeks'>\n          <td ng-mousedown='selectDate(day.date, true, true)' ng-click='$event.preventDefault()' ng-class='{\"other-month\": day.other, \"disabled-date\": day.disabled, \"selected\": day.selected, \"is-today\": day.today}' ng-repeat='day in week'>{{day.date | date:'d'}}<\/td>\n        <\/tr>\n      <\/tbody>\n    <\/table>\n    <div class='quickdate-popup-footer'>\n      <a href='' class='quickdate-clear' tabindex='-1' ng-hide='disableClearButton' ng-click='clear()'>Clear<\/a>\n    <\/div>\n  <\/div>\n<\/div>"}}]);n.directive("ngEnter",function(){return function(n,t,i){return t.bind("keydown keypress",function(t){if(t.which===13)return n.$apply(i.ngEnter),t.preventDefault()})}});n.directive("onTab",function(){return{restrict:"A",link:function(n,t,i){return t.bind("keydown keypress",function(t){if(t.which===9&&!t.shiftKey)return n.$apply(i.onTab)})}}})}).call(this);